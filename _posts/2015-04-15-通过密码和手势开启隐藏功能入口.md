---
layout: post
title: 通过密码和手势开启隐藏功能入口
--- 

这天老大跑过来笑眯眯对我说,给咱App整个切换马甲入口吧。俺，好吧。不要问老大为什么，看他笑眯眯的眼神一准是为了泡妞方便。你想啊老大每天回到家，他老婆大大拿他手机一看，全是和妹子的聊天记录，老大整个世界都不好了。再想一下老大有了切换马甲功能，回家随手一切，老婆大大拿起手机一看，咦、一条聊天记录都没有，今天这么乖，老大整个世界都和平了。

---

那就开始做吧。
开始想，怎么做呐？隐藏功能入口就是不能让其它用户发现，做个隐藏按钮吧，但是用户触发性会很大。那这样吧，按钮计数，点了一百次才能进入隐藏功能，呵呵（不知道老大会不会打我）


###正式开始
![](/images/416img.png)

把屏幕分成4宫格，通过点击区域的对应码生成密码。简单的说，我现在顺序点击1234，那生成的密码是1234，再用1234和我预设的密码对比。很简单的功能，确保了普通用户不会发现这个入口。想好了那就开始做。

这个功能以后的项目肯定能用上，那就写个共用组件吧。给UIIVew写个分类,分类的强大允许你在没有类源码的情况下扩展一个类的功能。我们给UIView加一个方法。

	-(void)addHideFunction:(void (^)())successCallBack;
	
点击生成的密码保存在哪呐，分类不能添加新的实例变量。还好，我们引入头文件<objc/runtime.h> 使用就可以使用objc_setAssociatedObject，分类就能用pwdStr属性了。
	<pre>
	-(void)setPwdStr:(NSMutableString *)pwdStr{
    	objc_setAssociatedObject(self, &PWDSTR, pwdStr, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}
	</pre>	


这样我们就运用objective-c的两种扩展机制，写个小组件还是能学到很多东西的。

####最终只要一名就能使用了
<pre>
[self.view addHideFunction:^{
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"提示" message:@"开启隐藏功能" delegate:nil cancelButtonTitle:@"取消" otherButtonTitles:@"确定", nil];
        [alertView show];
    }];
</pre>

来一发

![](https://farm8.staticflickr.com/7692/16947384877_a225c28c9d_o_d.gif)

什么 四宫格你还是担心用户试出来，没事，这里还有九宫格，十六宫格。

具体代码 github:[https://github.com/snsogbl/HideFunction](https://github.com/snsogbl/HideFunctionr)

